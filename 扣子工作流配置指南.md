# 🎯 扣子工作流配置指南

## 📋 在扣子工作流中使用圆形图片转换服务

### 步骤1: 部署网站

1. **选择部署平台**（推荐Railway或Heroku）
2. **上传代码并部署**
3. **获取网站URL**（例如：`https://your-app.railway.app`）

### 步骤2: 配置扣子工作流

#### 方案A: 使用图片上传节点 + HTTP请求节点

1. **添加图片上传节点**
   - 节点类型：图片上传
   - 功能：上传要转换的图片

2. **添加HTTP请求节点**
   - **URL**: `https://your-app.railway.app/api/convert`
   - **方法**: `POST`
   - **请求头**:
     ```
     Content-Type: application/json
     ```
   - **请求体**:
     ```json
     {
       "image_base64": "{{图片上传节点的输出}}"
     }
     ```

3. **添加输出节点**
   - 接收HTTP请求节点的响应
   - 提取 `image_base64` 字段作为圆形图片结果

#### 方案B: 直接使用图片URL

1. **添加HTTP请求节点**
   - **URL**: `https://your-app.railway.app/api/convert`
   - **方法**: `POST`
   - **请求头**:
     ```
     Content-Type: application/json
     ```
   - **请求体**:
     ```json
     {
       "image_base64": "data:image/png;base64,{{图片base64数据}}"
     }
     ```

### 步骤3: 参数配置详解

#### HTTP请求节点配置

| 参数 | 值 | 说明 |
|------|-----|------|
| URL | `https://your-domain.com/api/convert` | 您的网站API地址 |
| 方法 | POST | 请求方法 |
| Content-Type | application/json | 请求头 |
| 请求体 | JSON格式 | 包含图片数据 |

#### 请求体格式

```json
{
  "image_base64": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
  "size": 400
}
```

**参数说明：**
- `image_base64`: 必填，图片的base64编码数据
- `size`: 可选，指定输出图片的尺寸（像素）

#### 响应格式

```json
{
  "success": true,
  "image_base64": "iVBORw0KGgoAAAANSUhEUgAA...",
  "message": "图片已成功转换为圆形轮廓",
  "timestamp": "2024-01-01T12:00:00"
}
```

### 步骤4: 错误处理

#### 常见错误及解决方案

1. **网络连接失败**
   - 检查网站URL是否正确
   - 确认网站服务是否正常运行

2. **图片数据格式错误**
   - 确保图片数据是有效的base64编码
   - 检查图片格式是否支持

3. **服务器错误**
   - 查看网站日志
   - 检查服务器资源使用情况

#### 错误响应格式

```json
{
  "success": false,
  "error": "错误描述信息"
}
```

### 步骤5: 测试工作流

1. **上传测试图片**
2. **运行工作流**
3. **检查输出结果**
4. **验证圆形效果**

### 🎨 完整工作流示例

```
[开始] → [图片上传] → [HTTP请求] → [图片输出] → [结束]
   ↓         ↓          ↓          ↓
 启动    上传图片   发送转换请求   显示圆形图片
```

### 🔧 高级配置

#### 自定义输出尺寸

在HTTP请求的请求体中添加 `size` 参数：

```json
{
  "image_base64": "{{图片数据}}",
  "size": 300
}
```

#### 批量处理

如果需要处理多张图片，可以：

1. 使用循环节点
2. 为每张图片调用转换API
3. 收集所有结果

### 📊 性能优化建议

1. **图片大小控制**
   - 建议上传图片不超过5MB
   - 大图片可以预先压缩

2. **并发处理**
   - 网站支持多用户同时使用
   - 避免同时处理过多大图片

3. **缓存机制**
   - 相同图片可以缓存结果
   - 减少重复处理

### 🚨 注意事项

1. **网络稳定性**
   - 确保网站服务稳定运行
   - 建议使用可靠的云平台部署

2. **安全性**
   - 不要在请求中暴露敏感信息
   - 定期更新依赖包

3. **成本控制**
   - 监控API调用次数
   - 合理设置请求频率

### 📞 技术支持

如果在配置过程中遇到问题：

1. 检查网站是否正常运行
2. 验证API接口是否可访问
3. 查看扣子工作流的错误日志
4. 联系技术支持

---

**恭喜！** 现在您可以在扣子工作流中实现一键圆形图片转换功能了！🎉
