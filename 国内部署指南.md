# ğŸš€ å›½å†…APIéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†æ”¯æŒURLè¾“å…¥è¾“å‡ºçš„åœ†å½¢å›¾ç‰‡è½¬æ¢æœåŠ¡éƒ¨ç½²åˆ°å›½å†…æœåŠ¡å™¨ã€‚

## ğŸ”§ éƒ¨ç½²æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- `app_domestic.py` - å›½å†…éƒ¨ç½²ç‰ˆæœ¬çš„ä¸»åº”ç”¨æ–‡ä»¶
- `requirements_domestic.txt` - å›½å†…éƒ¨ç½²çš„ä¾èµ–åŒ…
- `vercel_domestic.json` - Verceléƒ¨ç½²é…ç½®ï¼ˆå¦‚æœä½¿ç”¨Vercelï¼‰

### æ–°å¢åŠŸèƒ½
- âœ… æ”¯æŒå›¾ç‰‡URLè¾“å…¥
- âœ… æ”¯æŒè¿”å›å¤„ç†åçš„å›¾ç‰‡URL
- âœ… æ”¯æŒæ–‡ä»¶ä¸‹è½½åŠŸèƒ½
- âœ… å¢å¼ºçš„é”™è¯¯å¤„ç†
- âœ… ç½‘ç»œè¶…æ—¶ä¿æŠ¤

## ğŸŒ éƒ¨ç½²æ–¹å¼

### æ–¹å¼1ï¼šVerceléƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **å‡†å¤‡æ–‡ä»¶**
   ```bash
   # é‡å‘½åæ–‡ä»¶
   mv app_domestic.py app.py
   mv requirements_domestic.txt requirements.txt
   mv vercel_domestic.json vercel.json
   ```

2. **æ¨é€åˆ°Gitä»“åº“**
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ å›½å†…éƒ¨ç½²ç‰ˆæœ¬ï¼Œæ”¯æŒURLè¾“å…¥è¾“å‡º"
   git push origin main
   ```

3. **åœ¨Vercelä¸­éƒ¨ç½²**
   - è¿æ¥åˆ°GitHubä»“åº“
   - è‡ªåŠ¨éƒ¨ç½²å®Œæˆ

### æ–¹å¼2ï¼šä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

1. **ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨**
   ```bash
   scp app_domestic.py user@your-server:/path/to/app/
   scp requirements_domestic.txt user@your-server:/path/to/app/requirements.txt
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements_domestic.txt
   ```

3. **è¿è¡Œåº”ç”¨**
   ```bash
   python app_domestic.py
   ```

4. **ä½¿ç”¨Gunicornï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰**
   ```bash
   gunicorn -w 4 -b 0.0.0.0:5000 app_domestic:app
   ```

## ğŸ”— APIç«¯ç‚¹

### 1. åŸºç¡€è½¬æ¢ï¼ˆbase64è¾“å…¥ï¼‰
```
POST /api/convert
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "image_base64": "data:image/png;base64,...",
  "size": 400
}
```

### 2. URLè¾“å…¥è½¬æ¢ï¼ˆæ–°åŠŸèƒ½ï¼‰
```
POST /api/convert-url
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "image_url": "https://example.com/image.jpg",
  "size": 400,
  "return_type": "url"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "image_url": "https://api.songgeixiaopengyoudeliwu.icu/download/circular_abc123.png",
  "filename": "circular_abc123.png",
  "message": "å›¾ç‰‡å·²æˆåŠŸè½¬æ¢ä¸ºåœ†å½¢è½®å»“",
  "timestamp": "2024-01-01T12:00:00"
}
```

### 3. æ–‡ä»¶ä¸‹è½½
```
GET /download/{filename}
```

### 4. å¥åº·æ£€æŸ¥
```
GET /api/health
```

## ğŸ§ª æµ‹è¯•éƒ¨ç½²

### æµ‹è¯•URLè¾“å…¥åŠŸèƒ½
```bash
curl -X POST https://api.songgeixiaopengyoudeliwu.icu/api/convert-url \
  -H "Content-Type: application/json" \
  -d '{
    "image_url": "https://picsum.photos/400/400",
    "size": 300,
    "return_type": "url"
  }'
```

### é¢„æœŸå“åº”
```json
{
  "success": true,
  "image_url": "https://api.songgeixiaopengyoudeliwu.icu/download/circular_abc123.png",
  "filename": "circular_abc123.png",
  "message": "å›¾ç‰‡å·²æˆåŠŸè½¬æ¢ä¸ºåœ†å½¢è½®å»“",
  "timestamp": "2024-01-01T12:00:00"
}
```

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡
```bash
BASE_URL=https://api.songgeixiaopengyoudeliwu.icu
```

### å¯é€‰çš„ç¯å¢ƒå˜é‡
```bash
FLASK_ENV=production
PORT=5000
```

## ğŸ“ ç›®å½•ç»“æ„

```
project/
â”œâ”€â”€ app_domestic.py          # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ requirements_domestic.txt # ä¾èµ–åŒ…
â”œâ”€â”€ vercel_domestic.json     # Vercelé…ç½®
â”œâ”€â”€ uploads/                 # ä¸Šä¼ ç›®å½•
â”œâ”€â”€ outputs/                 # è¾“å‡ºç›®å½•
â””â”€â”€ templates/               # æ¨¡æ¿ç›®å½•
    â””â”€â”€ index.html
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶æƒé™**ï¼šç¡®ä¿uploadså’Œoutputsç›®å½•æœ‰å†™æƒé™
2. **ç½‘ç»œè®¿é—®**ï¼šç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—®å¤–éƒ¨å›¾ç‰‡URL
3. **å­˜å‚¨ç©ºé—´**ï¼šå®šæœŸæ¸…ç†outputsç›®å½•ä¸­çš„æ—§æ–‡ä»¶
4. **å®‰å…¨è®¾ç½®**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­é…ç½®é€‚å½“çš„CORSå’Œå®‰å…¨å¤´

## ğŸ”„ æ›´æ–°æµç¨‹

1. ä¿®æ”¹ `app_domestic.py`
2. æµ‹è¯•åŠŸèƒ½
3. æ¨é€åˆ°Gitä»“åº“
4. è‡ªåŠ¨éƒ¨ç½²ï¼ˆå¦‚æœä½¿ç”¨Vercelï¼‰

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
2. éªŒè¯ä¾èµ–åŒ…å®‰è£…
3. æµ‹è¯•ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

---

**éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„å›½å†…APIå°†æ”¯æŒå®Œæ•´çš„URLè¾“å…¥è¾“å‡ºåŠŸèƒ½ï¼** ğŸ‰
